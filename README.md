# Telegram Bot for Discord

Двуботная система, написанная на Python, которая соединяет Discord и Telegram, позволяя пользователям управлять Discord-ботом через интерфейс Telegram. Discord-бот автоматически отправляет сообщения в указанные каналы в запланированное время в будние дни, а Telegram-бот предоставляет комплексный интерфейс управления.

## Возможности

### Discord Bot
- **Автоматическая отправка сообщений**: Отправка сообщений в случайное время в будние дни (10:30-12:00 по московскому времени)
- **Система двух каналов**: Отдельные каналы для автоматических сообщений и отложенных сообщений
- **Функция ожидания**: Возможность приостановить авто-отправку до определенного дня месяца
- **Перегенерация времени**: Возможность перегенерировать время автоотметки для изменения расписания
- **Управление через Telegram**: Полное удаленное управление через Telegram-интерфейс

### Telegram Bot
- **Управление автоотправкой сообщений Discord бота**: Позволяет включать и выключать автоотправку сообщений, а также задавать текст самого сообщения и день, до которого Discord бот будет ждать
- **Отложенные сообщения**: Планирование сообщений на конкретные даты/время с возможностью редактирования
- **Вложения в отложенные сообщения**: Возможность добавлять файлы и изображения к отложенным сообщениям с полным управлением (добавление, удаление, редактирование)
- **Отображение даты автоотправки**: Показ запланированного времени следующей автоматической отправки
- **Контроль доступа**: Доступ только для владельца по ID

## Установка и настройка

### Требования
- Python >= 3.13
- Токен Discord (пользовательский токен, не bot token)
- Токен Telegram бота
- ID каналов Discord и ваш Telegram ID

### Установка зависимостей

Проект использует `uv` для управления зависимостями:

```bash
uv sync
```

### Настройка конфигурации

Создайте файл `.env` в корне проекта:

```env
DISCORD_TOKEN=your_discord_user_token
DISCORD_CHAT_CHANNEL_ID=channel_id_for_auto_messages
DISCORD_PRIVATE_CHANNEL_ID=channel_id_for_delayed_messages
TELEGRAM_TOKEN=your_telegram_bot_token
YOUR_TELEGRAM_ID=your_telegram_user_id
```

**Важно**: Этот проект использует библиотеку `discord-py-self` для self-ботов, поэтому требуется пользовательский токен Discord, а не токен бота. [[Получите по гайду](https://www.youtube.com/watch?v=ECHX8iZeC6o)].

## Запуск

```bash
uv run src/main.py
```

## Архитектура проекта

```
repo/
├──.env                       # Файл с токенами и id
└──src/
    ├── main.py               # Главная точка входа
    ├── utils.py              # Управление конфигурацией
    ├── discord_bot/
    │   └── bot.py            # Discord бот
    ├── telegram_bot/
    │   └── bot.py            # Telegram бот
    └── custom_logger/
        ├── __init__.py
        └── custom_logger.py  # Система логирования
```